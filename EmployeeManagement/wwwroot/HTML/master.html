<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Home</title>
    <link rel="stylesheet" href="/css/masterStyle.css" />
</head>
<body>
    <form method="post">
        <div class="headdiv">
            <h1>EMPLOYEE MANAGEMENT SYSTEM</h1>
        </div>
        <div class="menubar">

            <a href="master.html"><label id="home">HOME</label></a>

            <a href="ResetPass.html"><label>RESET PASSWORD</label></a>

            <a href="Login.html"><label id="logout">LOGOUT</label></a>

        </div>
    </form>
    <div class="head2">
        <h2>Employee All Records</h2>
    </div>
    <div class="tablediv">
        <table id="tblEmployee">
            <thead>
                <tr>
                    <td>ID</td>
                    <td>First Name</td>
                    <td>Last Name</td>
                    <td>City</td>
                    <td>State</td>
                    <td>Zip</td>
                    <td>Contact</td>
                    <td>E-mail</td>
                    <td colspan="2" id="action">Action</td>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $.ajax({

                url: "/api/get",
                type: "GET",
                dataType: 'json',

                success: function (data) {
                    var EmployeeRecord = $("#tblEmployee tbody");
                    $(data).each(function (index, emp) {
                        EmployeeRecord.append('<tr><td>' + emp.id + '</td><td>' + emp.firstName + '</td><td>' + emp.lastName + '</td><td>' + emp.city + '</td><td>' + emp.state + '</td><td>' + emp.zip
                            + '</td><td>' + emp.contact + '</td><td>' + emp.email + '<td ><a href= Update.html><button id=editlabel onclick=editRow(' + emp.id + ')>Edit</button></a></td>'
                            + '<td><button id=deletlabel onclick=myfunction(' + emp.id + ')>Delete</button></td>');

                    });
                }
            });
        });

        function myfunction(id) {

            $.ajax({
                type: "DELETE",
                url: "/api/delete/" + id,
                data: { 'id': id },
                processData: true,
                success: function (data) {
                    alert("Record_deleted_successfully.")
                    window.location.reload();
                    return true;
                },
                error: function () {
                    alert("Error while deleting employeedata");
                }

            });
        }
    </script>
</body>
</html>