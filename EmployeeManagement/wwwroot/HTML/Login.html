<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    <title>EMPlogin</title>
    <link rel="stylesheet" href="/css/login.css" />
</head>
<body>
    <center>
        <form class="loginform">
            <h2>EMPLOYEE MANAGEMENT</h2>
            <h2>Login</h2>
            <div class="parent">
                <div>
                    <input type="email" name="tex" id="email" placeholder="Enter Emil-ID" required>
                </div>
                <div>
                    <input type="password" name="tex" id="password" placeholder="Enter Password" required>
                </div>
                <div class="forgotlink">
                    <a href="forgot.html">forgot password</a>
                </div>
                <div>
                    <button type="submit" id="btnSave"><b>Login</b></button>
                </div>

                <div class="regdiv">
                    Don't have an account ?
                    <a href="register.html">Register</a>
                </div>
            </div>
        </form>
    </center>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#btnSave").click(function () {

                var passreg = /^(?=.*[A-Z])(?=.*[0-9])(?=.*[~!@#$%^&*.-])[a-zA-Z0-9].{8,}$/;
                var emailreg = /^[a-zA-Z0-9.]{1,}@[a-z]{1,5}[.a-z]{1,5}[.]{1}[a-z]{1,4}$/;
                var testemail = document.getElementById('email').value;
                var testpass = document.getElementById('password').value;
                if (testemail.match(emailreg)) {
                    if (testpass.match(passreg)) {
                    }
                    else {
                        alert("Invalid Password.");
                        return false;
                    }
                }
                else {
                    alert("Invalid email.");
                    return false;
                }

                Email = $("#email").val();
                Password = $("#password").val();

                $.ajax({
                    type: "POST",
                    url: "/api/loginEmployee/" + Email + "/" + Password,
                    dataType: "",
                    contentType: "application/json; charset=utf-8",
                    processData: true,
                    success: function () {
                        alert("Login successfully.");
                        window.location.href = "https://localhost:44355/HTML/master.html"
                        return true;
                    },
                    error: function () {
                        alert("Error While Log_in");
                    }
                });
                return false;
            });
        });
    </script>
</body>
</html>